---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import CookieConsent from '../components/CookieConsent.astro';

const params = new URL(Astro.request.url).searchParams;
const sent = params.get('sent');
const pageTitle = 'Contact Reignite Solutions';
const pageDesc =
  'Speak to Reignite Solutions about delivery consulting, product leadership, or unblocking your projects.';
---
<BaseLayout title={pageTitle} description={pageDesc}>
  <Header />

  <main class="bg-surface min-h-screen">
    <!-- Hero section -->
    <section class="pt-24 pb-12 text-center">
      <div class="container-reignite">
        <p class="text-xs uppercase tracking-[0.25em] text-accent mb-4">Contact</p>
        <h1 class="text-3xl md:text-5xl font-display font-extrabold text-ink mb-6">
          Let’s get you moving again
        </h1>
        <p class="text-ink/70 max-w-2xl mx-auto">
          Whether your project’s stalled, your team’s stretched, or you just need senior support.<br>We’re here and ready to help.
        </p>
      </div>
    </section>

    <!-- Success message -->
    {sent && (
      <div class="container-reignite mb-10">
        <div class="bg-green-50 border border-green-200 rounded-lg p-4 text-sm text-green-800">
          Thank you — your message has been sent. We’ll be in touch soon.
        </div>
      </div>
    )}

    <!-- Contact form -->
    <section class="pb-24">
      <div class="container-reignite max-w-3xl">
        <form
          method="POST"
          action="/api/contact"
          class="bg-white/80 border border-ink/5 rounded-2xl p-8 md:p-10 shadow-sm space-y-8"
        >
          <!-- Honeypot -->
          <input type="text" name="website" class="hidden" tabindex="-1" autocomplete="off" />

          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <label for="name" class="block text-sm font-medium text-ink mb-2">Your name *</label>
              <input
                id="name"
                name="name"
                type="text"
                required
                class="w-full rounded-md border border-ink/10 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent/60"
                placeholder="Tom Hanks"
              />
            </div>
            <div>
              <label for="email" class="block text-sm font-medium text-ink mb-2">Email address *</label>
              <input
                id="email"
                name="email"
                type="email"
                required
                class="w-full rounded-md border border-ink/10 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent/60"
                placeholder="tom@yourcompany.co.uk"
              />
            </div>
          </div>

          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <label for="company" class="block text-sm font-medium text-ink mb-2">Company (optional)</label>
              <input
                id="company"
                name="company"
                type="text"
                class="w-full rounded-md border border-ink/10 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent/60"
                placeholder="Company Name"
              />
            </div>
            <div>
              <label for="subject" class="block text-sm font-medium text-ink mb-2">Subject (optional)</label>
              <input
                id="subject"
                name="subject"
                type="text"
                class="w-full rounded-md border border-ink/10 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent/60"
                placeholder="Help!"
              />
            </div>
          </div>

          <div>
            <label for="message" class="block text-sm font-medium text-ink mb-2">How can we help? *</label>
            <textarea
              id="message"
              name="message"
              required
              rows={6}
              class="w-full rounded-md border border-ink/10 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent/60"
              placeholder="Describe the challenge you’re facing..."
            ></textarea>
          </div>

          <div class="space-y-3">
            <p class="text-xs text-ink/50">
              By submitting this form, you agree to us contacting you about your enquiry.
              Read our <a href="/privacy" class="text-accent hover:underline">privacy policy</a>.
            </p>
            <button
              type="submit"
              class="inline-flex items-center gap-2 rounded-md bg-accent text-white font-semibold px-6 py-3 text-sm hover:bg-accent/90 transition"
            >
              Send message
            </button>
          </div>
        </form>
      </div>
    </section>
  </main>

  <Footer />
  <CookieConsent />
</BaseLayout>
